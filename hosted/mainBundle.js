(()=>{var e={303:(e,t,n)=>{const{emptyBoard:r,width:a,height:o,validMoveDeltas:i,validMoveDeltaCount:l,symmetryKVPs:s,isHexCode:c,isBinCode:u,isPuzzle:y,copyPuzzle:d,codeToPuzzle:h,puzzleToCode:f}=n(175);class m{constructor(e){e?y(e)?this.puzzle=e:c(e)?this.puzzle=h(e):u(e)?this.puzzle=h(e,!0):this.puzzle=r():this.puzzle=r(),this.moveHistory=[]}validateMove(e,t){if(!(e&&e.from&&"number"==typeof e.from.x&&"number"==typeof e.from.y&&e.to&&"number"==typeof e.to.x&&"number"==typeof e.from.y))return null;const n=e.from.x,r=e.from.y,s=e.to.x,c=e.to.y,u=s-n,y=c-r;let d=null;for(let e=0;e<l;e++){const t=i[e];t.x===u&&t.y===y&&(d=t)}if(!d)return null;const h=d.middle,f=n+h.x,m=r+h.y;if(n<0||n>=a)return null;if(r<0||r>=o)return null;if(s<0||s>=a)return null;if(c<0||c>=o)return null;const p=t?0:1,w=t?0:1,A=t?1:0;return this.puzzle[r][n]!==p||this.puzzle[m][f]!==w||this.puzzle[c][s]!==A?null:{matchingDelta:d,moveMid:{x:f,y:m}}}allValidMoves(e){const t=[];for(let n=0;n<o;n++)for(let r=0;r<a;r++)if(1===this.puzzle[n][r])for(let a=0;a<l;a++){const o=i[a],l=e?{from:{x:r-o.x,y:n-o.y},to:{x:r,y:n}}:{from:{x:r,y:n},to:{x:r+o.x,y:n+o.y}};this.validateMove(l,e)&&t.push(l)}return t}makeMove(e,t,n){const r=this.validateMove(e,t);if(!r)return!1;const{moveMid:a}=r,o=e.from,i=e.to,l=t?1:0,s=t?1:0,c=t?0:1;return this.puzzle[o.y][o.x]=l,this.puzzle[a.y][a.x]=s,this.puzzle[i.y][i.x]=c,n||this.moveHistory.push(e),!0}undo(e){this.makeMove(this.moveHistory.pop(),!e,!0)}countBalls(){let e=0;for(let t=0;t<o;t++)for(let n=0;n<a;n++)1===this.puzzle[t][n]&&e++;return e}getSymmetries(){const e=[];for(let t=0;t<s.length;t++){const[n,r]=s[t];let i=!0;for(let e=0;e<o;e++){for(let t=0;t<a;t++){const{x:n,y:a}=r({x:t,y:e});if(this.puzzle[e][t]!==this.puzzle[a][n]){i=!1;break}}if(!i)break}i&&e.push(n)}return e}generation(e=0,t=!1){const n=new m(d(this.puzzle)),r=new Set,a=e<0,o=e=>{if(0===e)r.add(n.code(t));else{const t=n.allValidMoves(a);for(let r=0;r<t.length;r++){const i=t[r];n.makeMove(i,a),o(e+(a?1:-1)),n.undo(a)}}};return o(e),r}solve(){const e=new m(d(this.puzzle));let t=e.countBalls();const n=[],r=()=>{if(1===t)return n;const a=e.allValidMoves();for(let o=0;o<a.length;o++){const i=a[o];e.makeMove(i),t--,n.push(i);const l=r();if(l)return l;e.makeMove(i,!0),t++,n.pop()}return null};return r()}puzzleToString(){return this.puzzle.map((e=>Array.from(e).map((e=>[".","O"," "][e])).join(" "))).join("\n")}code(e){return f(this.puzzle,e)}}e.exports=m},273:(e,t,n)=>{const{Component:r,createRef:a}=React,{distanceNoSqrt:o}=n(718),i=n(303),{emptyBoard:l,width:s,height:c}=n(175);e.exports=class extends r{constructor(e){super(e),this.state={disabled:!1,holdingBall:!1},this.canvasRef=a(),this.canvasOuterRef=a(),this.game=new i(e.code),this.code=e=>this.game.code(e),this.undo=e=>{this.game.undo(e),this.props.onMove()}}static getDerivedStateFromProps(e,t){return e.disabled!==t.disabled?{disabled:e.disabled,holdingBall:!e.disabled&&t.holdingBall}:null}componentDidMount(){const e=this.canvasRef.current,t=e.width,n=e.height,r=this.canvasOuterRef.current,a=e.getContext("2d"),i=l(),u=400/s,y=400/c,d=[];for(let e=0;e<c;e++){const t=[],n=y*(e+.5)+100;for(let r=0;r<s;r++)2!==i[e][r]&&(t[r]={x:u*(r+.5)+100,y:n});d[e]=t}let h=t/2,f=n/2;const m=t=>{if(!t)return;let n,a;const o=t.type.slice(0,5);"touch"===o?(n=t.touches[0].pageX,a=t.touches[0].pageY):"mouse"===o&&(n=t.pageX,a=t.pageY),h=(n-r.offsetLeft)*(e.width/r.offsetWidth),f=(a-r.offsetTop)*(e.height/r.offsetHeight)};let p=Math.floor(s/2),w=Math.floor(c/2);const A=e=>{m(e),p=Math.floor((h-100)/u),w=Math.floor((f-100)/y)};let U=0,g=0;const z=e=>{if(!this.state.disabled&&(A(e),1===this.game.puzzle[w][p])){const e=d[w][p];e&&o(h,f,e.x,e.y)<400&&(this.setState({holdingBall:!0}),U=p,g=w)}},x=e=>{if(this.state.disabled||!this.state.holdingBall)return;this.setState({holdingBall:!1}),A(e);const t={from:{x:U,y:g},to:{x:p,y:w}};this.game.makeMove(t)&&this.props.onMove()};r.onmousedown=z,r.onmousemove=m,r.onmouseup=x,r.onmouseout=x,r.ontouchstart=z,r.ontouchmove=m,r.ontouchend=x,r.ontouchcancel=x,a.lineWidth=3,a.strokeStyle="black",a.fillStyle="black";const v=()=>{requestAnimationFrame(v),a.clearRect(0,0,t,n);for(let e=0;e<c;e++)for(let t=0;t<s;t++)if(2!==i[e][t]&&(a.beginPath(),a.rect(u*t+100,y*e+100,u,y),a.closePath(),a.stroke(),1===this.game.puzzle[e][t]&&(!this.state.holdingBall||t!==U||e!==g))){const n=d[e][t];a.beginPath(),a.arc(n.x,n.y,20,0,2*Math.PI),a.closePath(),a.fill()}this.state.holdingBall&&(a.fillStyle="red",a.beginPath(),a.arc(h,f,20,0,2*Math.PI),a.closePath(),a.fill(),a.fillStyle="black"),a.beginPath()};v()}render(){return React.createElement("div",{ref:this.canvasOuterRef,className:"gameBoardCanvasOuter"},React.createElement("div",{className:"ratio1x1"},React.createElement("div",{className:"ratioContainer"},React.createElement("canvas",{ref:this.canvasRef,className:"gameBoardCanvas",width:"600",height:"600"}))))}}},718:e=>{e.exports={distanceNoSqrt:(e,t,n,r)=>{const a=n-e,o=r-t;return a*a+o*o}}},175:e=>{const t=()=>{const e=[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([0,0,0,0,0,0,0]),new Uint8Array([0,0,0,0,0,0,0]),new Uint8Array([0,0,0,0,0,0,0]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2])];return Object.seal(e),e},n={flipHoriz:e=>({x:6-e.x,y:e.y}),flipVert:e=>({x:e.x,y:6-e.y}),flipDiagPos:e=>({x:e.y,y:e.x}),flipDiagNeg:e=>({x:6-e.y,y:6-e.x}),rotate180:e=>({x:6-e.x,y:6-e.y}),rotate90counterClock:e=>({x:e.y,y:6-e.x}),rotate90clock:e=>({x:6-e.y,y:e.x})},r=Object.entries(n),a=parseInt("1".repeat(33),2),o=e=>a.toString(e).length,i=[];for(let e=2;e<=36;e++)i[e]=o(e);const l=new RegExp(`^[0-9a-f]{${o(16)}}$`),s=l.test.bind(l),c=new RegExp("^[01]{33}$"),u=c.test.bind(c);e.exports={emptyBoard:t,width:7,height:7,slotCount:33,validMoveDeltas:[{name:"right",x:2,y:0,middle:{x:1,y:0}},{name:"up",x:0,y:-2,middle:{x:0,y:-1}},{name:"left",x:-2,y:0,middle:{x:-1,y:0}},{name:"down",x:0,y:2,middle:{x:0,y:1}}],validMoveDeltaCount:4,symmetries:n,symmetryKVPs:r,isHexCode:s,isBinCode:u,isPuzzle:e=>{if(!e)return!1;const n=t();if(!Array.isArray(e))return!1;const r=e.length;if(7!==r)return!1;for(let t=0;t<r;t++){const r=e[t];if(!(r instanceof Uint8Array))return!1;const a=r.length;if(7!==a)return!1;for(let e=0;e<a;e++){const a=r[e];if(0!==a&&1!==a&&2!==a)return!1;if(2===n[t][e]!=(2===a))return!1}}return!0},copyPuzzle:e=>{const t=[];for(let n=0;n<7;n++)t[n]=new Uint8Array(e[n]);return Object.seal(t),t},codeToPuzzle:(e,n)=>{const r=n?e:parseInt(e,16).toString(2).padStart(33,"0"),a=t();let o=0;for(let e=0;e<7;e++){const t=a[e];for(let e=0;e<7;e++)2!==t[e]&&(t[e]=r[o],o++)}return a},puzzleToCode:(e,t)=>{let n="";for(let t=0;t<7;t++){const r=e[t];for(let e=0;e<7;e++){const t=r[e];2!==t&&(n+=t)}}return t?n:parseInt(n,2).toString(16).padStart(i[16],"0")}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{const{puzzleToCode:e}=n(175),t=n(273),{useState:r,createRef:a}=React,o={disappearingAct1:[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,1,0,2,2]),new Uint8Array([0,0,1,1,1,0,0]),new Uint8Array([0,0,0,1,0,0,0]),new Uint8Array([0,0,0,1,0,0,0]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2])],disappearingAct2:[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,1,0,2,2]),new Uint8Array([0,0,0,1,0,0,0]),new Uint8Array([0,1,1,1,1,1,0]),new Uint8Array([0,0,0,1,0,0,0]),new Uint8Array([2,2,0,1,0,2,2]),new Uint8Array([2,2,0,0,0,2,2])],disappearingAct3:[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,1,0,2,2]),new Uint8Array([0,0,1,1,1,0,0]),new Uint8Array([0,1,1,1,1,1,0]),new Uint8Array([1,1,1,1,1,1,1]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2])],spaceInvader:[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,1,0,2,2]),new Uint8Array([0,0,1,1,1,0,0]),new Uint8Array([0,1,0,1,0,1,0]),new Uint8Array([1,1,0,1,0,1,1]),new Uint8Array([2,2,1,0,1,2,2]),new Uint8Array([2,2,0,0,0,2,2])],puroMask:[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,1,0,2,2]),new Uint8Array([0,0,1,1,1,0,0]),new Uint8Array([0,1,0,1,0,1,0]),new Uint8Array([0,0,1,1,1,0,0]),new Uint8Array([2,2,1,0,1,2,2]),new Uint8Array([2,2,0,0,0,2,2])],disappearingAct4:[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([0,0,0,0,0,0,0]),new Uint8Array([0,0,1,0,1,0,0]),new Uint8Array([0,0,1,1,1,0,0]),new Uint8Array([2,2,1,1,1,2,2]),new Uint8Array([2,2,1,1,1,2,2])],generated:[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,1,0,2,2]),new Uint8Array([0,0,1,1,0,0,0]),new Uint8Array([1,1,1,1,0,0,0]),new Uint8Array([1,1,0,0,0,0,0]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2])],generated2:[new Uint8Array([2,2,0,0,1,2,2]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([0,1,1,0,1,1,0]),new Uint8Array([0,0,1,1,1,1,0]),new Uint8Array([1,1,1,0,0,0,0]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2])],baseGame:[new Uint8Array([2,2,1,1,1,2,2]),new Uint8Array([2,2,1,1,1,2,2]),new Uint8Array([1,1,1,1,1,1,1]),new Uint8Array([1,1,1,0,1,1,1]),new Uint8Array([1,1,1,1,1,1,1]),new Uint8Array([2,2,1,1,1,2,2]),new Uint8Array([2,2,1,1,1,2,2])]},i=n=>{const[i,l]=r(),[s,c]=r(!1),u=a();return React.createElement("div",{className:"wrapper"},React.createElement("h1",null,"Disappearing Act 1"),React.createElement("h2",null,"Created by: Niles"),React.createElement(t,{ref:u,disabled:s,code:e(o[n.puzzleName]),onMove:()=>{l("")}}),React.createElement("div",{className:"buttonContainer"},React.createElement("button",{id:"hintButton",type:"button",className:"btn btn-warning btn-lg",disabled:s,onClick:()=>{(async e=>{if(s)return null;c(!0),l("Awaiting hint...");const t=await fetch(`/hint?code=${e}`),{hint:n,unsolvable:r,alreadySolved:a,message:o}=await t.json();c(!1),200!==t.status?l(o):l(r?"Not solvable from this point! Please undo.":a?"This puzzle has already been solved!":n?React.createElement(React.Fragment,null,"(",n.from.x+1,", ",n.from.y+1,")"," ",React.createElement("i",{className:"fa fa-solid fa-arrow-right"})," ","(",n.to.x+1,", ",n.to.y+1,")"):"Unexpected server response.")})(u.current.code())}},React.createElement("i",{className:"fa-regular fa-lightbulb"})," Hint"),React.createElement("button",{id:"undoButton",type:"button",className:"btn btn-secondary btn-lg",disabled:s,onClick:()=>{u.current.undo()}},React.createElement("i",{className:"fa-solid fa-arrow-rotate-left"})," Undo")),React.createElement("h3",null,i))};window.onload=()=>{ReactDOM.createRoot(document.getElementById("app")).render(React.createElement(i,{puzzleName:"disappearingAct1"}))}})()})();