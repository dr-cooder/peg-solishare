(()=>{var r={727:r=>{const t=()=>{const r=[new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([0,0,0,0,0,0,0]),new Uint8Array([0,0,0,0,0,0,0]),new Uint8Array([0,0,0,0,0,0,0]),new Uint8Array([2,2,0,0,0,2,2]),new Uint8Array([2,2,0,0,0,2,2])];return Object.seal(r),r},n=[{name:"right",x:2,y:0,middle:{x:1,y:0}},{name:"up",x:0,y:-2,middle:{x:0,y:-1}},{name:"left",x:-2,y:0,middle:{x:-1,y:0}},{name:"down",x:0,y:2,middle:{x:0,y:1}}],e=new RegExp("^[0-9a-f]{9}$"),i=e.test.bind(e);r.exports=class{constructor(r){r?(r=>{if(!r)return!1;const n=t();if(!Array.isArray(r))return!1;const e=r.length;if(7!==e)return!1;for(let t=0;t<e;t++){const e=r[t];if(!(e instanceof Uint8Array))return!1;const i=e.length;if(7!==i)return!1;for(let r=0;r<i;r++){const i=e[r];if(0!==i&&1!==i&&2!==i)return!1;if(2===n[t][r]!=(2===i))return!1}}return!0})(r)?this.grid=r:"string"==typeof r?(this.grid=(r=>{if(!i(r))return null;const n=t(),e=parseInt(r,16).toString(2).padStart(33,"0");let o=0;for(let r=0;r<7;r++){const t=n[r];for(let r=0;r<7;r++)2!==t[r]&&(t[r]=e[o],o++)}return n})(r),this.grid||(this.grid=t())):this.grid=t():this.grid=t()}copyGrid(){const r=[];for(let t=0;t<7;t++)r[t]=new Uint8Array(this.grid[t]);return Object.seal(r),r}isValidMove(r){if(!r.from||"number"!=typeof r.from.x||"number"!=typeof r.from.y||!r.to||"number"!=typeof r.to.x||"number"!=typeof r.from.y)return null;const t=r.from.x,e=r.from.y,i=r.to.x,o=r.to.y,s=i-t,l=o-e;let f=null;for(let r=0;r<4;r++){const t=n[r];t.x===s&&t.y===l&&(f=t)}if(!f)return null;const y=f.middle,d=t+y.x,a=e+y.y;return t<0||t>=7||e<0||e>=7||i<0||i>=7||o<0||o>=7||1!==this.grid[e][t]||1!==this.grid[a][d]||0!==this.grid[o][i]?null:f}allValidMoves(){const r=[];for(let t=0;t<7;t++)for(let e=0;e<7;e++)if(1===this.grid[t][e])for(let i=0;i<4;i++){const o=n[i],s={from:{x:e,y:t},to:{x:e+o.x,y:t+o.y}};this.isValidMove(s)&&r.push(s)}return r}gridAfterMove(r){const t=this.isValidMove(r);if(!t)return null;const n=r.from,e=t.middle,i=n.x+e.x,o=n.y+e.y,s=r.to,l=this.copyGrid();return l[n.y][n.x]=0,l[o][i]=0,l[s.y][i]=1,l}isWon(){let r=0;for(let t=0;t<7;t++)for(let n=0;n<7;n++)1===this.grid[t][n]&&r++;return 1===r}gridToString(){return this.grid.map((r=>Array.from(r).map((r=>[".","O"," "][r])).join(" "))).join("\n")}}}},t={};function n(e){var i=t[e];if(void 0!==i)return i.exports;var o=t[e]={exports:{}};return r[e](o,o.exports,n),o.exports}(()=>{const r=new(n(727))("a23efb5c1");console.log(r.gridToString()),console.log(r.allValidMoves())})()})();